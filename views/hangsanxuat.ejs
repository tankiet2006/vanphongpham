<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hãng Sản Xuất</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        :root {
            --neon-green: #39FF14;
            --neon-aqua: #00FFFF;
            --neon-yellow: #FFEE32;
            --neon-red: #FF073A;
            --neon-orange: #ff8c00;
            --dark-bg: #000;
            --card-bg: #111;
            --text-light: #EEE;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--neon-green);
        }

        /* Section title */
        .text-aqua {
            color: var(--neon-aqua) !important;
            text-shadow: 0 0 8px var(--neon-aqua);
        }

        .border-neon {
            border-color: var(--neon-aqua) !important;
            opacity: 0.7;
        }

        .section-title {
            color: var(--neon-aqua);
            text-shadow: 0 0 10px var(--neon-aqua);
        }

        .section-title {
            color: var(--neon-aqua);
            text-shadow: 0 0 5px var(--neon-aqua);
            border-bottom: 1px solid var(--neon-green);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        input::placeholder {
            color: var(--text-light) !important;
            opacity: 1; /* Firefox */
        }

        .form-label{
            color: var(--neon-yellow) !important;
        }
        
        .table-container {
            background-color: var(--dark-bg) !important;
            border: 1px solid var(--neon-green) !important;
            border-radius: 8px !important;
            padding: 10px;
            box-shadow: 0 0 12px rgba(57, 255, 20, 0.3);
            margin-bottom: 20px;
            overflow-y: auto;
            max-height: 300px;
        }

        table td, table th {
            text-align: center;
            vertical-align: middle;
        }


        .table-container::-webkit-scrollbar {
            width: 8px;
        }

        .table-container::-webkit-scrollbar-track {
            background: var(--dark-bg) !important;
        }

        .table-container::-webkit-scrollbar-thumb {
            background: var(--neon-yellow);
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: var(--neon-aqua);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table thead th {
            position: sticky;
            top: 0;
            z-index: 1;
            background-color: var(--dark-bg) !important;
            color: var(--neon-yellow) !important;
            text-align: center;
            border: 1px solid var(--neon-green);
            padding: 10px;
            text-shadow: 0 0 5px var(--neon-yellow);
        }

        .table tbody td {
            background-color: var(--dark-bg) !important;
            color: var(--neon-aqua) !important;
            border: 1px solid var(--neon-green);
            text-align: center;
            padding: 10px;
        }

        /* Hover row effect */
        .table tbody tr:hover td {
            background-color: #111 !important;
            box-shadow: 0 0 5px var(--neon-aqua);
            transition: all 0.2s ease-in-out;
        }

        /* Dòng thông báo không có dữ liệu */
        .table tbody tr td[colspan] {
            color: var(--neon-aqua);
            background-color: var(--dark-bg) !important;
            font-style: italic;
            text-align: center;
        }

        .text-end{
            color: var(--neon-orange) !important;
        }

        /* Form Styles */
        .txtTenHSX, .txtQuocGia {
            background-color: var(--dark-bg) !important;
            color: var(--neon-aqua) !important;
            border: 1px solid var(--neon-green) !important;
        }
        
        .txtTenHSX:focus, .txtQuocGia:focus {
            box-shadow: 0 0 10px var(--neon-aqua);
            border-color: var(--neon-aqua) !important;
        }
        
        /* Button Styles */
        .btnThem, .btnHuy {
            border: 1px solid var(--neon-green) !important;
            border-radius: 5px !important;
            color: var(--dark-bg) !important;
            background-color: var(--neon-green) !important;
            transition: all 0.3s;
        }
        
        .btnThem:hover {
            background-color: var(--neon-aqua) !important;
            box-shadow: 0 0 10px var(--neon-aqua);
        }
        
        .btnHuy:hover {
            border: 1px solid var(--neon-red) !important;
            background-color: var(--neon-red) !important;
            box-shadow: 0 0 10px var(--neon-red) !important;
        }

        .btnSua{
            background-color: var(--neon-yellow) !important;
        }

        .btnXoa{
            background-color: #FF073A !important;
        }

        /* Card Styles */
        .card {
            background-color: var(--card-bg) !important;
            border: 1px solid var(--neon-green) !important;
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(57, 255, 20, 0.3);
        }
    </style>
</head>
<body>
    <!-- INCLUDE HEADER -->
    <%- include('header') %>

    <!-- INCLUDE NAVBAR -->
    <%- include('navbar') %>

    <!-- MAIN CONTENT -->
    <div class="container mt-4">
        <div class="row mb-4">
            <div class="col">
                <h2 class="text-aqua"><i class="bi bi-building-gear"></i> Quản lý hãng sản xuất</h2>
                <hr class="border-neon">
            </div>
        </div>

        <div class="row">
        <!-- FORM NHẬP -->  
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="section-title"><i class="bi bi-plus-circle"></i> Tên Hãng Sản Xuất</h3>
                    <form method="POST" action="<%= typeof edit_data !== 'undefined' ? '/hangsanxuat/sua/' + edit_data._id : '/hangsanxuat/them' %>">
                        <div class="mb-3">
                            <label class="form-label">Tên hãng sản xuất</label>
                            <input type="text" class="txtTenHSX form-control" name="TenHangSanXuat"
                                value="<%= typeof edit_data !== 'undefined' ? edit_data.TenHangSanXuat : '' %>"
                                required placeholder="Nhập tên hãng sản xuất" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Quốc gia</label>
                            <input type="text" class="txtQuocGia form-control" name="QuocGia"
                                value="<%= typeof edit_data !== 'undefined' ? edit_data.QuocGia : '' %>"
                                required placeholder="Nhập quốc gia" />
                        </div>
                        <div class="d-flex justify-content-end gap-2 mt-4">
                            <button type="submit" name="luu" class="btn btnThem">
                            <i class="bi bi-save"></i> <%= typeof edit_data !== 'undefined' ? 'Cập nhật' : 'Thêm' %>
                            </button>
                            <% if (typeof edit_data !== 'undefined') { %>
                            <a href="/hangsanxuat" class="btn btnHuy">
                                <i class="bi bi-x-circle"></i> Hủy bỏ
                            </a>
                            <% } %>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Danh sách -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h3 class="section-title"><i class="bi bi-building-gear"></i> Danh sách Hãng Sản Xuất</h3>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>TÊN HÃNG</th>
                                    <th>QUỐC GIA</th>
                                    <th width="75px">SỬA</th>
                                    <th width="75px">XÓA</th>
                                </tr>
                            </thead>

                            <!-- HIỆN DỮ LIỆU -->
                            <tbody>
                                <% if (hangsanxuat && hangsanxuat.length > 0) { %>
                                    <% hangsanxuat.forEach(function(row) { %>
                                        <tr>
                                            <td><%= row.TenHangSanXuat %></td>
                                            <td><%= row.QuocGia %></td>
                                            <!-- SỬA VÀ XÓA -->
                                            <td>
                                                <a href="/hangsanxuat/sua/<%= row._id %>" class="btnSua btn btn-warning">Sửa</a>
                                            </td>
                                            <td>
                                                <form action="/hangsanxuat/xoa/<%= row._id %>" method="POST" onsubmit="return confirm('Xóa hãng sản xuất này khỏi danh sách?');">
                                                    <button type="submit" class="btnXoa btn btn-danger">
                                                        Xóa
                                                    </button>
                                                </form>
                                            </td>
                                        </tr>
                                    <% }); %>
                                <% } else { %>
                                    <tr>
                                        <td colspan="4" class="text-center">Không có hãng sản xuất nào</td>
                                    </tr>
                                <% } %>
                            </tbody>
                        </table>
                        <div class="text-end">
                            Tổng số hãng sản xuất: <strong><%= hangsanxuat ? hangsanxuat.length : 0 %></strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- INCLUDE FOOTER -->
    <%- include('footer') %>
</body>
</html>